<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="DC.Creator" content="Bianca Raimondi, Martina Ceccarelli Canali, Cristina Volpicella">
<meta name="DC.Language" content="it">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>Ambiente Autore</title>
	
<!-- inclusione librerie bootstrap, jquery e qr jquery -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">	
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

<!-- inclusione funzioni js -->
<script type="text/javascript" src="autore.js"></script>
	
<!-- inclusione foglio di stile -->
<link rel="stylesheet" href="autore.css">
	
<!-- inclusione icona pagina-->
<link rel="icon" type="image/png" sizes="16x16" href="icon/logow.png">
		
</head>
<body>
	
<!-- intestazione pagina ambiente autore -->
<nav class="navbar navbar-light">
	<span class="navbar-text">
	<img src="icon/logow.png" alt="logo progetto M&M Mistero al Museo" id="logoprogetto"/>
	</span>
	<span class="navbar-text">
	<h2 id="titolopagina">Ambiente Autore</h2>
	</span>
</nav>
<br>
	
<!-- contenitore contenuto pagina -->	
<div class="container-fluid" >
	<div class="row" id="row1">
		
		<!-- contenitore storie archiviate -->
		<div class="col-sm-4 col-md-4 col-lg-4" id="storiaarc">
			<h2><center> Storie Archiviate </center></h2>
			<br>
			<div class="row" id="pulsantisa">
				&nbsp;
				<button type="button" id="crea" class="btn">Crea una nuova storia</button>
				&nbsp; 
				<button class="btn btn-secondary dropdown-toggle" type="button" id="azionearchivio" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Azioni</button>
				<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton"><a class="dropdown-item" href="#" id="modificastoria">Modifica Storia</a>
					<a class="dropdown-item" href="#" data-target="#finestraeliminaS" data-toggle="modal" >Elimina Storia</a>
					<a class="dropdown-item" href="#" id="duplicastoria">Duplica Storia</a>
					<a class="dropdown-item" href="#" id="pubblicastoria">Pubblica Storia</a>
				</div>
			</div>
			<div class="row">&nbsp;
			<input type="file" id="caricajson" accept="application/JSON" onChange="readFile(this)" hidden/>
			<label class="btn btn-secondary" id="labelcaricajson" for="caricajson">Carica Storia</label></div>
			<br>
	
			<!-- Elenco storie archiviate -->
			<div id="storiearchiviate" class="history">
				<!-- storie inserite dinamicamente -->
			</div>
		</div>

		<br><br><br><br>

		<!-- linea rossa separazione -->	
		<div class="lineaverticale"></div>

		<!-- contenitore crea storia nascosto -->
		<label id="titolo1"><h4> &nbsp;&nbsp; Crea o seleziona una storia </h4></label>
		<div id="messageerrorfunction"></div>
		<div class="col-sm col-md col-lg" id="formattivita" hidden>
			<div id="form-row">
				<div class="form-group col">
					<h2>Creazione nuova storia</h2>
					<br>
					<h3>Titolo Storia:</h3><br>
					<input type="text" class="form-control" id="titolostoriacrea" placeholder="Titolo Storia" name="titolostoria" value=""> 
					<br>
					<h6>Accessibile? &nbsp; <input type="checkbox" id="accessibile" name="accessibile"></h6>
					<br>
					<h6>Fascia età storia: &nbsp;</h6>
					<div class="input-group mb-3">
				  		<select class="custom-select" id="creaetastoria">
							<option value="eta1">7-10 anni</option>
							<option value="eta2">11-14 anni</option>
							<option value="eta3">15-18 anni</option>
				  		</select>
					</div>
					<br>
					<div id="messageerror"></div>
					<br>
					<button type="button" id="salva" class="btn">Salva</button> 
					<button type="button" id="annullacrea" class="btn">Annulla</button>
				</div>
			</div>
		</div>
		
		<!-- contenitore modifica storia nascosto -->
		<div class="col-sm col-md col-lg" id="formmodifica" hidden>
			<div id="form-row1">
				<div class="form-group col">
					<h2>Modifica storia</h2>
					<br>
					<h3>Titolo Storia:</h3><br>
					<input type="text" class="form-control" id="titolostoriamod" placeholder="Titolo Storia" value="">
					<br>
					<h6>Accessibile? &nbsp; <input type="checkbox" id="accessibilemodifica"></h6>
					<br>
					<h6>Fascia età storia: &nbsp;</h6>
					<div class="input-group mb-3">
				  		<select class="custom-select" id="modificaetastoria">
							<option value="eta1">7-10 anni</option>
							<option value="eta2">11-14 anni</option>
							<option value="eta3">15-18 anni</option>
				  		</select>
					</div>
					<br>
					<div id="messageerrormod"></div>
					<br>
					<br>
					<button type="button" id="salvamodifica" class="btn">Salva Modifica</button> 
					<button type="button" id="annullamod" class="btn">Annulla</button>
				</div>
			</div>
		</div>
	</div>

	<div class="row" id="row2">
		
		<!-- contenitore storia pubblicate -->
		<div class="col-sm-4 col-md-4 col-lg-4" id="storiapub">
			<br>	
			<h2><center> Storie Pubblicate </center></h2>
			<br>
			<div class="row" id="pulsantisp">
				&nbsp;
				<button type="button" class="btn btn-secondary" id="archiviastoria">Archivia Storia</button>
			</div>
			<br>
			<div id="storiepubblicate" class="historya">
			<!-- storie inserite dinamicamente -->
			</div>
		</div>
		
		<!-- linea rossa separazione -->		
		<div class="lineaverticale"></div>
		
		<!-- contenitore missioni -->
		<div class="col-sm col-md col-lg" id="missioni">	
			<br>
			<h2><center> Missioni </center></h2>
			<br>
			<div class="row" id="pulsantimissioni">
			&nbsp;
			<button type="button" class="btn btn-primary btn-sm" id="nuovamissione" data-target="#finestramissione" data-toggle="modal">Crea nuova missione</button>&nbsp;
			<button type="button" class="btn btn-primary btn-sm" id="modificamissione" data-target="#finestramodificamissione" data-toggle="modal"><img src="icon/modify.png"  width="18" height="17" alt="immagine modifica missione"/></button>&nbsp;
			<button type="button" class="btn btn-primary btn-sm" id="duplicamissione"><img src="icon/paste.png"  width="18" height="17" alt="immagine duplica missione"/></button>&nbsp;
			<button type="button" class="btn btn-primary btn-sm" id="eliminamissione" data-target="#finestraeliminamis" data-toggle="modal"><img src="icon/delete.png"  width="18" height="17" alt="immagine elimina missione"/></button>&nbsp;
			</div>
			<br>
			<div id="errormission"></div>
			<br>
			<!-- contenitore singole missioni -->	
			<div id="elencomissioni">
				<!-- create in modo dinamico -->
			</div>	
		</div>
		
		<!-- linea rossa separazione -->		
		<div class="lineaverticale"></div>

		<!-- contenitore attività -->
		<div class="col-sm col-md col-lg" id="attivita">	
			<br>     
			<h2><center> Attività </center></h2><br>
			<div class="row" id="pulsantiattivita">
			&nbsp;
			<button type="button" class="btn btn-primary btn-sm" data-target="#finestraattivita" data-toggle="modal" id="nuovaattivita">Crea nuova attività</button>&nbsp;
			<button type="button" class="btn btn-primary btn-sm" id="modificaattivita" data-target="#finestramodificaattivita" data-toggle="modal"><img src="icon/modify.png"  width="18" height="17" alt="immagine modifica attivita"/></button>&nbsp;
			<button type="button" class="btn btn-primary btn-sm" id="duplicaattivita"><img src="icon/paste.png"  width="18" height="17" alt="immagine duplica attività"/></button> &nbsp;
			<button type="button" data-target="#finestraeliminaatt" data-toggle="modal" class="btn btn-primary btn-sm" id="eliminaattivita" ><img src="icon/delete.png"  width="18" height="17" alt="immagine elimina attività"/></button> &nbsp;
			</div>
			<br>
			<div id="erroreattivita"></div>
			<br>
			<!-- contenitore singole attività -->
			<div id="elencoattivita">
				<!-- create in modo dinamico -->
			</div>	
		</div>
	</div>

	<!-- finestra creazione nuova attività -->
	<div class="modal fade bd-example-modal-xl" id="finestraattivita" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<form id="newActivityForm" method="post" enctype="multipart/form-data" name="formAttivita" onsubmit="validateForm(event)">
					<div class="modal-header">
						<h3 class="modal-title" id="creanuovaatt">Attività</h3>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<h6>Sfondo: </h6>
						<div>
							<input type="file" id="sfondo" name="background" accept=".jpg">
						</div>
						<hr>
						<h6>Domanda: </h6>
						<input class="form-control" type="text" placeholder="Domanda Attività" id="domandaattivita">
						<br>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="checkboxrisposte" value="option1" onclick="check()">
  							<label class="form-check-label" for="checkboxrisposte">Selezionami, se vuoi inserire le risposte con i bottoni.</label>
						</div>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="checkboxcampo" value="option2" onclick="check()">
  							<label class="form-check-label" for="checkboxcampo">Selezionami, se vuoi che l'utente digiti manualmente la risposta.</label>
						</div>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="checkboxfoto" value="option3" onclick="check()">
  							<label class="form-check-label" for="checkboxfoto">Selezionami, se vuoi che l'utente inserisca una foto nella risposta.</label>
						</div>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="checkboxniente" value="option4" onclick="check()" checked>
  							<label class="form-check-label" for="checkboxniente">Selezionami, se non vuoi inserire le risposte.</label>
						</div>
						<hr>
						<h6>Risposte Pulsanti:</h6>
						<div class="form-row">
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Corretta" id="rispostacorretta" disabled>
							</div>
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Sbagliata 1" id="rispostasbagliata1" disabled>
							</div>					
						</div>
						<div class="form-row">
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Sbagliata 2" id="rispostasbagliata2" disabled>
							</div>
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Sbagliata 3" id="rispostasbagliata3" disabled>
							</div>					
						</div>
						<br>
						<h6>Aiuto: </h6>
						<input class="form-control" type="text" placeholder="Aiuto Risposta" id="aiutorisposta" disabled><br>
						<h6>Aiuto con immagine: </h6>
						<div>
							<input type="file" id="aiutoimmagine" name="helpimage" accept=".jpg" disabled>
						</div>
						<br>
						<h6>In caso di risposta sbagliata: </h6>
						<textarea class="form-control" id="messaggiorispostasbagliata" rows="3" placeholder="Messaggio risposta sbagliata" disabled></textarea>
						<br>
					</div>
					<div id="messageerrattivita"></div>
					<br>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annullaat">Annulla</button>
						<button type="submit" class="btn btn-primary" id="salvaat">Salva</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<!-- finestra modifica attività -->
	<div class="modal fade bd-example-modal-xl" id="finestramodificaattivita" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<form id="modifyActivityForm" method="post" enctype="multipart/form-data" name="formModificaAttivita" onsubmit="validateModifyForm(event)">
					<div class="modal-header">
						<h3 class="modal-title" id="modificanuovaatt">Modifica Attività</h3>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<h6>Sfondo: </h6>
						<div>
							<input type="file" id="modificasfondo" name="background" accept=".jpg">
						</div>
						<br>
						<div id="sfondocaricato"></div>
						<hr>
						<h6>Domanda: </h6>
						<input class="form-control" type="text" placeholder="Domanda Attività" id="moddomandaattivita">
						<br>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="modcheckboxrisposte" value="option1" onclick="check()">
  							<label class="form-check-label" for="modcheckboxrisposte">Selezionami, se vuoi inserire le risposte con i pulsanti.</label>
						</div>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="modcheckboxcampo" value="option2" onclick="check()">
  							<label class="form-check-label" for="modcheckboxcampo">Selezionami, se vuoi che l'utente digiti manualmente la risposta.</label>
						</div>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="modcheckboxfoto" value="option3" onclick="check()">
  							<label class="form-check-label" for="checkboxfoto">Selezionami, se vuoi che l'utente inserisca una foto nella risposta.</label>
						</div>
						<div class="form-check form-check-inline">
  							<input class="form-check-input" name="exampleRadios" type="radio" id="modcheckboxniente" value="option3" onclick="check()" checked >
  							<label class="form-check-label" for="modcheckboxniente">Selezionami, se non vuoi inserire le risposte.</label>
						</div>
						<hr>
						<h6>Risposte Pulsanti: </h6>
						<div class="form-row">
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Corretta" id="modrispostacorretta"  disabled>
							</div>
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Sbagliata 1" id="modrispostasbagliata1" disabled>
							</div>					
						</div>
						<div class="form-row">
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Sbagliata 2" id="modrispostasbagliata2" disabled>
							</div>
							<div class="col">
								<input type="text" class="form-control" placeholder="Risposta Sbagliata 3" id="modrispostasbagliata3" disabled>
							</div>					
						</div>
						<br>
						<h6>Aiuto: </h6>
						<input class="form-control" type="text" placeholder="Aiuto Risposta" id="modaiutorisposta" disabled><br>
						<h6>Aiuto con immagine: </h6>
						<div>
							<input type="file" id="modificaaiutoimmagine" name="helpimage" accept=".jpg" disabled>
							<br>
						</div>
						<br>
						<div id="imgaiutocaricato"></div>
						<br>
						<h6>In caso di risposta sbagliata: </h6>
						<textarea class="form-control" id="modmessaggiorispostasbagliata" rows="3" placeholder="Messaggio risposta sbagliata" disabled></textarea>
						<br>
					</div>
					<div id="messageerrmodattivita"></div>
					<br>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annullamodat">Annulla</button>
						<button type="submit" class="btn btn-primary" id="salvamodat">Salva</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<!-- contenitore crea nuova missione -->
	<div class="modal fade bd-example-modal-xl" id="finestramissione" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="modal-title" id="creanuovamis">Missione</h3>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h5>Titolo Missione: </h5> 
					<input class="form-control" type="text" placeholder="Titolo Missione" id="titolomissione">
					<br>
					<div id="messageerrormissione"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annullamissione">Annulla</button>
					<button type="button" class="btn btn-primary" id="salvamissione">Salva</button>
				</div>
			</div>
		</div>
	</div>	
	
	<!-- contenitore modifica missione -->
	<div class="modal fade bd-example-modal-xl" id="finestramodificamissione" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="modal-title" id="modificamis">Modifica missione</h3>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h5>Titolo Missione: </h5> <input class="form-control" type="text" placeholder="Titolo Missione" id="modtitolomissione" ><br>
					<div id="modmessageerrormissione"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annullamodmis">Annulla</button>
					<button type="button" class="btn btn-primary" id="salvamodmis">Salva Modifica</button>
				</div>
			</div>
		</div>
	</div>
	
	<!-- finestra conferma eliminazione attività -->
	<div class="modal fade" id="finestraeliminaatt" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel1">Elimina Attività</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					Sei sicuro di voler eliminare l'attività?
				</div>
				<div id="messageerroractivitydelete"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annullaatt">Annulla</button>
					<button type="button" class="btn btn-primary" id="confermaeliminaatt">Conferma</button>
				</div>
			</div>
		</div>
	</div>	
	
	<!-- finestra conferma eliminazione missione-->
	<div class="modal fade" id="finestraeliminamis" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel3">Elimina Missione</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					Sei sicuro di voler eliminare la missione?
				</div>
				<div id="messageerrormissiondelete"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annullaeliminamis">Annulla</button>
					<button type="button" class="btn btn-primary" id="confermaeliminamis">Conferma</button>
				</div>
			</div>
		</div>
	</div>	

	<!-- finestra conferma eliminazione storia -->
	<div class="modal fade" id="finestraeliminaS" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Elimina Storia Archiviata</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					Sei sicuro di voler eliminare definitivamente la storia?
				</div>
				<div id="messageerrorstorydelete"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="annulla">Annulla</button>
					<button type="button" class="btn btn-primary" id="confermaelimina" data-dismiss="modal">Conferma</button>
				</div>
			</div>
		</div>
	</div>	
</div>
<br>
	
<!-- navbar inferiore -->	
<footer>
	<nav class="navbar navbar-fixed-bottom">
		<button class="navbar-toggler" type="button" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" id="backhome">
		Torna alla pagina principale
		</button>
	</nav>
</footer>
</body>
</html>